---
import catalogo from "../../config/catalogo.json";

const catalogoKeys = Object.keys(catalogo);

type Producto = {
    id: number;
    nombre: string;
    precio: number;
    descripcion: string;
    imagen: string;
    tipo?: string;
    origen?: string;
    alcohol?: string;
    [key: string]: any;
};
---

<section
    id="catalogo"
    class="py-16  max-w-7xl mx-auto"
>

    <!-- Header del catálogo -->
    <div class="text-center mb-12">
        <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-amber-500 mb-4">
            Nuestro Catálogo
        </h2>
        <p class="text-lg md:text-xl text-slate-300 max-w-2xl mx-auto">
            Disfruta de nuestra variedad de productos seleccionados especialmente para ti.
        </p>
    </div>

    <!-- Categorías y productos -->
    <div class="space-y-16">
        {
            catalogoKeys.map((key: string) => (
                <div class="categoria-section">
                    <!-- Título de categoría -->
                    <div class="mb-8">
                        <h3 class="text-2xl md:text-4xl font-extrabold uppercase tracking-wide text-white text-center relative inline-block w-full">
                            <span class="bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent">
                                {key}
                            </span>
                            <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full"></div>
                        </h3>
                    </div>

                    <!-- Grid de productos -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        {catalogo[key as keyof typeof catalogo].map(
                            (producto: Producto) => (
                                <div class="group bg-gradient-to-br from-slate-900 to-slate-800 border-slate-700 rounded-xl overflow-hidden shadow-xl hover:shadow-2xl hover:shadow-amber-500/20 transition-all duration-300 hover:-translate-y-2 border  hover:border-amber-500/50">
                                    <!-- Imagen del producto -->
                                    <div class="relative overflow-hidden h-48 bg-slate-800">
                                        <img
                                            src={
                                                producto.imagen ||
                                                "https://www.greencustoms.org/sites/default/files/default_images/default-placeholder.png"
                                            }
                                            alt={producto.nombre}
                                            class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                                            onerror="this.onerror=null;this.src='https://www.greencustoms.org/sites/default/files/default_images/default-placeholder.png';"
                                        />
                                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent opacity-60"></div>
                                    </div>

                                    <!-- Contenido del producto -->
                                    <div class="p-5 space-y-3">
                                        <h4 class="text-xl font-bold text-white group-hover:text-amber-400 transition-colors line-clamp-2">
                                            {producto.nombre}
                                        </h4>

                                        {producto.descripcion && (
                                            <p class="text-sm text-slate-400 italic line-clamp-2">
                                                {producto.descripcion}
                                            </p>
                                        )}

                                        <!-- Detalles del producto -->
                                        <div class="grid grid-cols-2 gap-2 text-sm pt-2 border-t border-slate-700">
                                            {producto.tipo && (
                                                <div class="flex flex-col">
                                                    <span class="text-slate-500 text-xs">Tipo</span>
                                                    <span class="text-white font-medium">{producto.tipo}</span>
                                                </div>
                                            )}
                                            {producto.origen && (
                                                <div class="flex flex-col">
                                                    <span class="text-slate-500 text-xs">Origen</span>
                                                    <span class="text-white font-medium">{producto.origen}</span>
                                                </div>
                                            )}
                                            {producto.alcohol && (
                                                <div class="flex flex-col">
                                                    <span class="text-slate-500 text-xs">Alcohol</span>
                                                    <span class="text-white font-medium">{producto.alcohol}</span>
                                                </div>
                                            )}
                                        </div>

                                        {/* <!-- Precio -->
                                        <div class="pt-3 flex items-center justify-between border-t border-slate-700">
                                            <span class="text-2xl font-bold text-amber-400">
                                                ${producto.precio.toLocaleString("es-CO")}
                                            </span>
                                            <button class="bg-amber-500 hover:bg-amber-600 text-slate-900 font-bold py-2 px-4 rounded-lg text-sm transition-all hover:scale-105">
                                                Ordenar
                                            </button>
                                        </div> */}
                                    </div>
                                </div>
                            )
                        )}
                    </div>
                </div>
            ))
        }
    </div>
</section>

<style>
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
</style>